#!/usr/bin/env zsh

# Ask for the administrator password upfront
sudo -v

# Keep-alive: update existing `sudo` time stamp until script is done
while true; do sudo -n true; sleep 60; kill -0 "$$" || exit; done 2>/dev/null &

cd ~/.dotfiles
echo "Updating ALL the things!"

# Update these scripts!
echo_g "==> Updating dotfiles"
git pull

# Updating the system with it's package manager (brew, apt-get, etc.)
echo_g "==> Updating installed packages"
pkg_update

if command_exists zsh; then
    echo_g "==> Updating zsh, rvm and vim"
    # Then the rest
    install/zsh
    echo
fi

# Update vim if it exists
if [ -d ~/.vim ]; then
    cd ~/.vim
    git pull
    cd ~/.dotfiles
    install/vim
fi

echo_g "==> All done!"
